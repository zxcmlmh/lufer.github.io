<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="AntDesign Pro 快速上手"><meta name="keywords" content="React,前端"><meta name="author" content="Lufer"><meta name="copyright" content="Lufer"><title>AntDesign Pro 快速上手 | Lufer</title><link rel="shortcut icon" href="http://pic.lufer.cc/images/2021/03/05/eI1NJH.png"><link rel="stylesheet" href="/css/index.css?version=1.9.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.js" defer></script><link rel="dns-prefetch" href="https://hm.baidu.com"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?e2cd7e52254704223bd3b9c0461bc06e";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script><script src="https://www.googletagmanager.com/gtag/js?id=G-T5L2KPFS29"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-T5L2KPFS29');</script><script src="https://v1.hitokoto.cn/?encode=js&amp;charset=utf-8&amp;select=.footer_custom_text" defer></script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"D3K0O2R6F2","apiKey":"4e808ae377111360493e99d31970584c","indexName":"BLOG_LUFER","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容:${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  hexoVersion: '5.3.0'
} </script><meta name="generator" content="Hexo 5.3.0"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87"><span class="toc-text"> 前期准备</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"><span class="toc-text"> 环境配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E9%A1%B5%E9%9D%A2"><span class="toc-text"> 新建页面</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6"><span class="toc-text"> 创建文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E5%AE%9A%E8%8F%9C%E5%8D%95"><span class="toc-text"> 设定菜单</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E8%81%94%E8%8F%9C%E5%8D%95%E4%B8%8E%E9%A1%B5%E9%9D%A2"><span class="toc-text"> 关联菜单与页面</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A21-%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91"><span class="toc-text"> 页面1-原生开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%91%E5%90%8E%E7%AB%AF%E5%8F%91%E8%B5%B7%E8%AF%B7%E6%B1%82"><span class="toc-text"> 向后端发起请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E7%94%A8%E8%AF%B7%E6%B1%82%E5%8F%91%E8%B5%B7%E5%87%BD%E6%95%B0"><span class="toc-text"> 调用请求发起函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E9%A1%B5%E9%9D%A2"><span class="toc-text"> 更新页面</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A22-%E5%BF%AB%E9%80%9F%E7%A7%BB%E6%A4%8D"><span class="toc-text"> 页面2-快速移植</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6%E7%A7%BB%E6%A4%8D"><span class="toc-text"> 静态文件移植</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6%E5%BC%95%E5%85%A5"><span class="toc-text"> 静态文件引入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E5%AE%9E%E7%8E%B0"><span class="toc-text"> 页面实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#js%E4%BB%A3%E7%A0%81"><span class="toc-text"> JS代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E5%90%8E-%E6%95%B0%E6%8D%AE%E8%B0%83%E7%94%A8"><span class="toc-text"> 最后-数据调用</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="http://pic.lufer.cc/images/2021/03/05/eI1UWd.jpg"></div><div class="author-info__name text-center">Lufer</div><div class="author-info__description text-center">新的一天开始啦</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">63</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">30</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">16</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">大佬们</div><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://www.yuque.com/grace-gu">Grace</a><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="http://1ogisk.cn/">Logik</a><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://blog.legume.ltd">豆哥</a><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="http://esportnosave.cn/">EsportsNoSave</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(http://pic.lufer.cc/images/2021/03/05/eI1dSA.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Lufer</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">主页</a><a class="site-page" href="/archives">归档</a><a class="site-page" href="/categories">分类</a><a class="site-page" href="/tags">标签</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> 搜索</span></a></span></div><div id="post-info"><div id="post-title">AntDesign Pro 快速上手</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-04-22</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">3.3k</span><span class="post-meta__separator">|</span><span>阅读时长: 14 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h2 id="前期准备"><a class="markdownIt-Anchor" href="#前期准备"></a> 前期准备</h2>
<h3 id="环境配置"><a class="markdownIt-Anchor" href="#环境配置"></a> 环境配置</h3>
<ol>
<li>安装Node.js</li>
<li>Clone项目</li>
<li>本地NPM INSTALL完成相关组件的自动安装</li>
</ol>
<h2 id="新建页面"><a class="markdownIt-Anchor" href="#新建页面"></a> 新建页面</h2>
<p>  项目组织结构：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">├── &#x2F;src&#x2F;            # 项目源码目录</span><br><span class="line">| |—— &#x2F;assets        # 图标</span><br><span class="line">| |—— &#x2F;common</span><br><span class="line">|   |—— &#x2F;menu        # 菜单</span><br><span class="line">    |—— &#x2F;router      # 路由</span><br><span class="line">| |—— &#x2F;layouts       # 布局</span><br><span class="line">│ ├── &#x2F;components&#x2F;   # 项目组件</span><br><span class="line">│ ├── &#x2F;routes&#x2F;       # 路由组件（页面维度）</span><br><span class="line">│ ├── &#x2F;models&#x2F;       # 数据模型</span><br><span class="line">│ ├── &#x2F;services&#x2F;     # 数据接口</span><br><span class="line">│ ├── &#x2F;utils&#x2F;        # 工具函数</span><br><span class="line">│ ├── router.js      # 路由权限？</span><br><span class="line">| |—— config.js      # 全局配置</span><br><span class="line">│ ├── index.js       # 入口文件</span><br><span class="line">│ ├── index.less     </span><br><span class="line">│ └── index.ejs</span><br></pre></td></tr></table></figure>
<h3 id="创建文件"><a class="markdownIt-Anchor" href="#创建文件"></a> 创建文件</h3>
<p>  与routes文件夹下按照喜好的组织结构建立js文件。</p>
<p>  本例中建立文件夹Tutorial，并建立demo1.js与demo2.js两个页面。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">├── &#x2F;src&#x2F;            </span><br><span class="line">│ ├── &#x2F;routes&#x2F;       </span><br><span class="line">    |—— &#x2F;Tutorial    </span><br><span class="line">        |—— &#x2F;demo1.js</span><br><span class="line">        |—— &#x2F;demo2.js</span><br></pre></td></tr></table></figure>
<h3 id="设定菜单"><a class="markdownIt-Anchor" href="#设定菜单"></a> 设定菜单</h3>
<p>  在common/menu下，托管了项目所有的左边栏菜单。</p>
<p>  菜单以Json数组形式存在，如下是一个完整的菜单项。</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    name: &#x27;dashboard&#x27;,          #菜单名</span><br><span class="line">    icon: &#x27;dashboard&#x27;,          #菜单图标</span><br><span class="line">    path: &#x27;dashboard&#x27;,          #菜单路径</span><br><span class="line">    authority: &#x27;admin&#x27;,         #权限控制    </span><br><span class="line">    children: [                 #子菜单</span><br><span class="line">      &#123;                            </span><br><span class="line">        name: &#x27;分析页&#x27;,         </span><br><span class="line">        path: &#x27;analysis&#x27;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>  我们在其中添加一个菜单项。</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    name: &#x27;AntD-Tutorial&#x27;,      </span><br><span class="line">    icon: &#x27;dashboard&#x27;,         </span><br><span class="line">    path: &#x27;tutorial&#x27;,   </span><br><span class="line">    children: [                </span><br><span class="line">      &#123;                            </span><br><span class="line">        name: &#x27;演示页面1&#x27;,         </span><br><span class="line">        path: &#x27;demo1&#x27;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;                            </span><br><span class="line">        name: &#x27;演示页面2&#x27;,         </span><br><span class="line">        path: &#x27;demo2&#x27;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],       </span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h3 id="关联菜单与页面"><a class="markdownIt-Anchor" href="#关联菜单与页面"></a> 关联菜单与页面</h3>
<p>  在菜单页中，我们将两个子菜单分别指向了：<br />
  <code>/tutorial/demo1</code><br />
  <code>/tutorial/demo2</code></p>
<p>  接下来需要接管该路径，指向对应的js文件。</p>
<p>  修改<code>/common/router.js</code>。</p>
<p>  在routerConfig项中添加如下所示路径，即可绑定地址与页面。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;/tutorial/demo1&#x27;</span>: &#123;</span><br><span class="line">    component: dynamicWrapper(app, [], <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../routes/Tutorial/demo1&#x27;</span>)),</span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&#x27;/tutorial/demo2&#x27;</span>: &#123;</span><br><span class="line">    component: dynamicWrapper(app, [], <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../routes/Tutorial/demo2&#x27;</span>)),</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2 id="页面1-原生开发"><a class="markdownIt-Anchor" href="#页面1-原生开发"></a> 页面1-原生开发</h2>
<p>  在demo1，我们将介绍AntDesign架构的原生开发方式，也借此来理解AntDesign的页面生命周期与数据驱动流程。</p>
<p>  我们建立一个十分简单的空白页面demo1，并逐步丰富内容来实现最终功能</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component, Fragment &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">demo1</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Fragment&gt;</span><br><span class="line"></span><br><span class="line">      &lt;/Fragment&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  AntDesign提供了十分丰富的标准页面，例如表单页，列表页，详情页等，我们这里手动实现一次列表页。</p>
<p>  既然是数据驱动，所以我们从数据开始，像页面倒推实现过程。</p>
<h3 id="向后端发起请求"><a class="markdownIt-Anchor" href="#向后端发起请求"></a> 向后端发起请求</h3>
<p>  所有向后端发起的请求，均托管于<code>servvices/api.js</code>中。</p>
<p>  我们在其中实现一个请求函数。</p>
<p>  这里强调一下，既然是前后端分离开发，所以各部分人员可以各司其职，并不需要相互制约，只要制定了前后端的数据格式，并且双方均遵守，即可各自分离开发，在最后阶段进行联调即可。</p>
<p>  为了实现分离开发，前端可以在自行开发阶段对请求自动进行返回。</p>
<p>  此时我们实现如下所示的一个请求函数：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">GetDataFromBackStage</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request(<span class="string">&#x27;/api/fake_get_data&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  此处可见，我们向api/fake_get_data发起了一个请求。</p>
<p>  前端提供了一个mock工具，RoadHog，用于拦截请求，返回数据，从而让前端开发不再依赖于后端。</p>
<p>  我们在.roadhogrc.mock.js中对该请求进行一个拦截并模拟了一组返回值。</p>
<p>  其语法是<code>请求方式 请求路径:&#123;返回值&#125;</code>。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;GET /api/fake_get_data&#x27;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;pagination&quot;</span>:</span><br><span class="line">      &#123; <span class="string">&quot;total&quot;</span>: <span class="number">1</span>, <span class="string">&quot;current&quot;</span>: <span class="number">1</span>, <span class="string">&quot;pageSize&quot;</span>: <span class="number">10</span> &#125;,</span><br><span class="line">    <span class="string">&quot;list&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;dataid&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;time&quot;</span>: <span class="string">&quot;2018-10-25T12:29:25.000+0000&quot;</span>,</span><br><span class="line">        <span class="string">&quot;datasourcetype&quot;</span>: <span class="string">&quot;kafka&quot;</span>,</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;测试用-北京出租车GPS数据&quot;</span>,</span><br><span class="line">        <span class="string">&quot;datatype&quot;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">&quot;crossprovince&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;datalocation&quot;</span>: <span class="string">&quot;北京市&quot;</span>,</span><br><span class="line">        <span class="string">&quot;datafield&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;company&quot;</span>: <span class="string">&quot;Didicompany&quot;</span>,</span><br><span class="line">        <span class="string">&quot;datadescription&quot;</span>: <span class="string">&quot;测试用-北京出租车GPS数据&quot;</span>,</span><br><span class="line">        <span class="string">&quot;ownnode&quot;</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="string">&quot;datadefinition&quot;</span>: <span class="string">&quot;字段名:StrCompanyID,数据类型:string,字段说明:StrCompanyID;字段名:StrDepLongitude,数据类型:double,字段说明:StrDepLongitude;字段名:StrDepLatitude,数据类型:double,字段说明:StrDepLatitude;字段名:StrOrderID,数据类型:string,字段说明:StrOrderID;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;url&quot;</span>: <span class="string">&quot;/user/download?file=f6bbfb6e512531cb78a086b94708f398.166ab336727&amp;name=order_true.json&quot;</span>,</span><br><span class="line">        <span class="string">&quot;resourceip&quot;</span>: <span class="string">&quot;127.0.0.1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;kafkatopic&quot;</span>: <span class="string">&quot;ORDER&quot;</span>,</span><br><span class="line">        <span class="string">&quot;dataurl&quot;</span>: <span class="string">&quot;127.0.0.1:8000&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;dataid&quot;</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="string">&quot;time&quot;</span>: <span class="string">&quot;2018-10-25T12:39:55.000+0000&quot;</span>,</span><br><span class="line">        <span class="string">&quot;datasourcetype&quot;</span>: <span class="string">&quot;kafka&quot;</span>,</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;北京出租车GPS数据&quot;</span>,</span><br><span class="line">        <span class="string">&quot;datatype&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;crossprovince&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;datalocation&quot;</span>: <span class="string">&quot;北京市&quot;</span>,</span><br><span class="line">        <span class="string">&quot;datafield&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;company&quot;</span>: <span class="string">&quot;Didicompany&quot;</span>,</span><br><span class="line">        <span class="string">&quot;datadescription&quot;</span>: <span class="string">&quot;北京出租车GPS数据&quot;</span>,</span><br><span class="line">        <span class="string">&quot;ownnode&quot;</span>: <span class="number">6</span>,</span><br><span class="line">        <span class="string">&quot;datadefinition&quot;</span>: <span class="string">&quot;字段名:StrCompanyID;字段名:StrDepLongitude;字段名:StrDepLatitude;字段名:StrOrderID;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;url&quot;</span>: <span class="string">&quot;/user/download?file=f6bbfb6e512531cb78a086b94708f398.166ab3d0424&amp;name=order_true.json&quot;</span>,</span><br><span class="line">        <span class="string">&quot;resourceip&quot;</span>: <span class="string">&quot;192.168.3.19&quot;</span>,</span><br><span class="line">        <span class="string">&quot;kafkatopic&quot;</span>: <span class="string">&quot;ORDER&quot;</span>,</span><br><span class="line">        <span class="string">&quot;dataurl&quot;</span>: <span class="string">&quot;192.168.3.19:8000&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p>  这样在api中发送请求时，roadhog就可以先将请求拦截下，从而方便前端开发，而在进行联调时，仅需更改api中的请求函数，即可与后端进行测试，例如可改成如下代码段。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">DataSearch</span>(<span class="params">params</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> curToken = token.get();</span><br><span class="line">  <span class="keyword">return</span> request(<span class="string">`<span class="subst">$&#123;config.domain&#125;</span>/data/Search`</span>, &#123;</span><br><span class="line">    method: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    headers: &#123;</span><br><span class="line">      Authorization: curToken,</span><br><span class="line">    &#125;,</span><br><span class="line">    body: params,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="调用请求发起函数"><a class="markdownIt-Anchor" href="#调用请求发起函数"></a> 调用请求发起函数</h3>
<p>  现在我们有了前后端交互的最后一步，即发起请求的函数，那么我们再向前一步，实现调用该函数的函数。</p>
<p>  model层托管了所有的数据服务，我们在Model下新建一个tutorialModel.js，来实现View层与API层的连接。</p>
<p>  先放上全部代码，再进行解释。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">import &#123; GetDataFromBackStage &#125; from &#x27;../services/api&#x27;;    #从api中引入我们定义的请求函数</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  namespace: &#x27;tutorialModel&#x27;,      #组件名</span><br><span class="line">  state: &#123;                         #state定义了你的数据格式，我们这里使用了一个data变量</span><br><span class="line">    data: &#123;</span><br><span class="line">      list: [],</span><br><span class="line">      pagination: &#123;&#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  effects: &#123;</span><br><span class="line">    *getData(&#123;  &#125;, &#123; call, put &#125;) &#123;                         #定义一个getData函数</span><br><span class="line">      const response = yield call(GetDataFromBackStage, );  #调用我们定义的请求发起函数 </span><br><span class="line">      yield put(&#123;                                           #这里处理返回值，调用reducer中的saveData，把返回值传过去</span><br><span class="line">        type: <span class="string">&#x27;saveData&#x27;</span>,</span><br><span class="line">        payload: response,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  reducers: &#123;</span><br><span class="line">    <span class="function"><span class="title">saveData</span>(<span class="params">state, &#123; payload &#125;</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,                                           #将state中的data取出来，并赋新值</span><br><span class="line">        data: payload,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>  至此就完成了数据的获取与保存，在下一步则是进行页面View层的更新。</p>
<h3 id="更新页面"><a class="markdownIt-Anchor" href="#更新页面"></a> 更新页面</h3>
<p>  在最后一步，我们完成请求的发起与结果的获取，回到我们的demo.js。</p>
<p>  我们以按照DashBoard下面的该表格为例，实现一个表格页面。</p>
<p><img src="https://i.loli.net/2019/08/07/ChdFbAEi9xTVBRX.jpg" alt="" /></p>
<p>  调用该组件，我们仅需在render中添加一个table标签，然后绑定各项数据源即可，查看示例页的实现，可见其table参数如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;Table</span><br><span class="line">  rowKey=&#123;<span class="function"><span class="params">record</span> =&gt;</span> record.index&#125;</span><br><span class="line">  size=<span class="string">&quot;small&quot;</span></span><br><span class="line">  columns=&#123;columns&#125;</span><br><span class="line">  dataSource=&#123;searchData&#125;</span><br><span class="line">  pagination=&#123;&#123;</span><br><span class="line">    style: &#123; <span class="attr">marginBottom</span>: <span class="number">0</span> &#125;,</span><br><span class="line">      pageSize: <span class="number">5</span>,</span><br><span class="line">    &#125;&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>
<p>  我们所要修改的也就是其columns和DataSource了。</p>
<p>  首先，在componentDidMount中，通过dispatch方法，发起请求，来触发前几步中所实现的逐项函数，这里才是这些函数的调用起点。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; dispatch &#125; = <span class="built_in">this</span>.props;</span><br><span class="line">  dispatch(&#123;</span><br><span class="line">    type: <span class="string">&#x27;tutorialModel/getData&#x27;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  通过connect，将model和这个页面的component连接起来，从而可以在页面中调用model保存下来的数值。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">@connect(<span class="function">(<span class="params">&#123; tutorialModel&#125;</span>) =&gt;</span> (&#123;</span><br><span class="line">  tutorialModel,</span><br><span class="line">&#125;))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>  注意，@connect要写在component定义的前面。</p>
<p>  获取到的数据是保存在props中的，我们先把数据解构出来，方面后面调用。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; tutorialModel &#125;=<span class="built_in">this</span>.props;</span><br><span class="line"><span class="keyword">const</span> &#123; data &#125;=tutorialModel;</span><br></pre></td></tr></table></figure>
<p>  再定义一下表格的各列信息。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> columns = [</span><br><span class="line">      &#123;</span><br><span class="line">        title: <span class="string">&#x27;数据名称&#x27;</span>,</span><br><span class="line">        dataIndex: <span class="string">&#x27;name&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        title: <span class="string">&#x27;描述&#x27;</span>,</span><br><span class="line">        dataIndex: <span class="string">&#x27;datadescription&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        title: <span class="string">&#x27;数据领域&#x27;</span>,</span><br><span class="line">        dataIndex: <span class="string">&#x27;datafield&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        title: <span class="string">&#x27;状态&#x27;</span>,</span><br><span class="line">        dataIndex: <span class="string">&#x27;status&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        title: <span class="string">&#x27;时间&#x27;</span>,</span><br><span class="line">        dataIndex: <span class="string">&#x27;time&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ];</span><br></pre></td></tr></table></figure>
<p>  最后在配置一下Table的各项数据源。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;Table</span><br><span class="line">          rowKey=<span class="string">&quot;dataid&quot;</span></span><br><span class="line">          size=<span class="string">&quot;small&quot;</span></span><br><span class="line">          columns=&#123;columns&#125;</span><br><span class="line">          dataSource=&#123;data.list&#125;</span><br><span class="line">          pagination=&#123;&#123;</span><br><span class="line">              style: &#123; <span class="attr">marginBottom</span>: <span class="number">0</span> &#125;,</span><br><span class="line">              pageSize: <span class="number">5</span>,</span><br><span class="line">            &#125;&#125;</span><br><span class="line">        /&gt;</span><br></pre></td></tr></table></figure>
<p>  完成，运行效果如图：</p>
<p><img src="https://i.loli.net/2019/08/07/IAWpl6m8Ys7kZzX.jpg" alt="" /></p>
<p>  页面完整代码如下。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">&#x27;dva&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Card,Table&#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"></span><br><span class="line">@connect(<span class="function">(<span class="params">&#123; tutorialModel &#125;</span>) =&gt;</span> (&#123;</span><br><span class="line">  tutorialModel,</span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">demo1</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; dispatch &#125; = <span class="built_in">this</span>.props;</span><br><span class="line">    dispatch(&#123;</span><br><span class="line">      type: <span class="string">&#x27;tutorialModel/getData&#x27;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; tutorialModel &#125;=<span class="built_in">this</span>.props;</span><br><span class="line">    <span class="keyword">const</span> &#123; data &#125;=tutorialModel;</span><br><span class="line">    <span class="keyword">const</span> columns = [</span><br><span class="line">      &#123;</span><br><span class="line">        title: <span class="string">&#x27;数据名称&#x27;</span>,</span><br><span class="line">        dataIndex: <span class="string">&#x27;name&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        title: <span class="string">&#x27;描述&#x27;</span>,</span><br><span class="line">        dataIndex: <span class="string">&#x27;datadescription&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        title: <span class="string">&#x27;数据领域&#x27;</span>,</span><br><span class="line">        dataIndex: <span class="string">&#x27;datafield&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        title: <span class="string">&#x27;状态&#x27;</span>,</span><br><span class="line">        dataIndex: <span class="string">&#x27;status&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        title: <span class="string">&#x27;时间&#x27;</span>,</span><br><span class="line">        dataIndex: <span class="string">&#x27;time&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Card bordered=&#123;<span class="literal">false</span>&#125;&gt;</span><br><span class="line">        &lt;Table</span><br><span class="line">          rowKey=<span class="string">&quot;dataid&quot;</span></span><br><span class="line">          size=<span class="string">&quot;small&quot;</span></span><br><span class="line">          columns=&#123;columns&#125;</span><br><span class="line">          dataSource=&#123;data.list&#125;</span><br><span class="line">          pagination=&#123;&#123;</span><br><span class="line">              style: &#123; <span class="attr">marginBottom</span>: <span class="number">0</span> &#125;,</span><br><span class="line">              pageSize: <span class="number">5</span>,</span><br><span class="line">            &#125;&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/Card&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  最后注意，要修改一下router，将我们定义的model传给页面，否则会找不到数据。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;/tutorial/demo1&#x27;</span>: &#123;</span><br><span class="line">  component: dynamicWrapper(app, [<span class="string">&#x27;tutorialModel&#x27;</span>], <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../routes/Tutorial/demo1&#x27;</span>)),</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2 id="页面2-快速移植"><a class="markdownIt-Anchor" href="#页面2-快速移植"></a> 页面2-快速移植</h2>
<p>  在页面2，我们将演示如何快速的将一个现有页面完成移植。</p>
<p>  我们要实现的目标页面如下图所示：</p>
<p><img src="https://i.loli.net/2019/08/07/zgY51FiN8he4WqO.jpg" alt="" /></p>
<h3 id="静态文件移植"><a class="markdownIt-Anchor" href="#静态文件移植"></a> 静态文件移植</h3>
<p>  相关json文件，js文件，css文件等静态文件，全部放在public目录下</p>
<h3 id="静态文件引入"><a class="markdownIt-Anchor" href="#静态文件引入"></a> 静态文件引入</h3>
<p>  JS文件，在index.ejs中进行引入。</p>
<p><img src="https://i.loli.net/2019/08/07/wTRKvFLrd6OqzCG.jpg" alt="" /></p>
<p>  CSS文件，在同级目录下，建立demo2.less文件。</p>
<p>  将页面中自定义的css样式复制其中，注意这里的css命名不能带“-”。</p>
<p>  通过@import的方式，引入现成的静态CSS文件，代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">@<span class="keyword">import</span> <span class="string">&#x27;/css/commons.min.css&#x27;</span>;</span><br><span class="line">@<span class="keyword">import</span> <span class="string">&#x27;/css/scheme-polygon.min.css&#x27;</span>;</span><br><span class="line">@<span class="keyword">import</span> <span class="string">&#x27;//minedata.cn/minemapapi/v1.4/minemap.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">.buttongroup &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  top: 20px;</span><br><span class="line">  right: 120px;</span><br><span class="line">  z-index: <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.mybutton &#123;</span><br><span class="line">  background-color: #257962;</span><br><span class="line">  border: none;</span><br><span class="line">  color: white;</span><br><span class="line">  padding: 10px 25px;</span><br><span class="line">  text-align: center;</span><br><span class="line">  text-decoration: none;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  font-size: 16px;</span><br><span class="line">  margin: 10px;</span><br><span class="line">  cursor: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.leftlist&#123;</span><br><span class="line">  background-color: #333333;</span><br><span class="line">  position: absolute;</span><br><span class="line">  left:<span class="number">15</span>%;</span><br><span class="line">  top:<span class="number">10</span>%;</span><br><span class="line">  opacity: <span class="number">.6</span>;</span><br><span class="line">  color:#ffffff;</span><br><span class="line">  border-radius: 5px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.table-row:hover &#123;</span><br><span class="line">  background-color: #666666;</span><br><span class="line">&#125;</span><br><span class="line">#map-legend-box&#123;</span><br><span class="line">  display:none !important</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="页面实现"><a class="markdownIt-Anchor" href="#页面实现"></a> 页面实现</h3>
<p>  将原页面的HTML代码，全部放在render的return中，这里注意，所有的style需要改为json数组的形式进行实现，不能写成HTML的形式,而通过className方式引入的css样式可以正常使用。</p>
<p>  代码节选如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> (</span><br><span class="line">     &lt;div&gt;</span><br><span class="line">       &lt;div id=<span class="string">&quot;map&quot;</span>  style=&#123;&#123;<span class="attr">width</span>: <span class="string">&#x27;100%&#x27;</span>,<span class="attr">height</span>:<span class="string">&#x27;700px&#x27;</span>&#125;&#125;&gt;</span><br><span class="line">         &lt;div className=<span class="string">&quot;map-control-box&quot;</span> id=<span class="string">&quot;map-control-box&quot;</span>&gt;</span><br><span class="line">           &lt;div id=<span class="string">&quot;map-control-btn-box&quot;</span> className=<span class="string">&quot;map-control-btn-box-dgmsd&quot;</span>&gt;</span><br><span class="line">           &lt;/div&gt;</span><br><span class="line">           &lt;div id=<span class="string">&quot;tipBox&quot;</span> className=<span class="string">&quot;tip-box-dgmsd select-1&quot;</span>&gt;</span><br><span class="line">             &lt;div id=<span class="string">&quot;tipInfo&quot;</span> className=<span class="string">&quot;tip-info&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">           &lt;/div&gt;</span><br><span class="line">         &lt;/div&gt;</span><br><span class="line">         &lt;div id=<span class="string">&quot;map-legend-box&quot;</span> className=<span class="string">&quot;map-legend-box&quot;</span> style=&#123;&#123;<span class="attr">display</span>:<span class="string">&quot;none&quot;</span>&#125;&#125;&gt;</span><br><span class="line">         &lt;/div&gt;</span><br><span class="line">         &lt;div className=<span class="string">&quot;map-select-locale&quot;</span> id=<span class="string">&quot;map-select-locale&quot;</span>&gt;</span><br><span class="line">           &lt;div className=<span class="string">&quot;select-control-1 btn-select-locale&quot;</span> id=<span class="string">&quot;select-control-1&quot;</span>&gt;</span><br><span class="line">             &lt;div className=<span class="string">&quot;select-text&quot;</span>&gt;2D&lt;/div&gt;</span><br><span class="line">           &lt;/div&gt;</span><br><span class="line">           &lt;div className=<span class="string">&quot;select-control-2&quot;</span> id=<span class="string">&quot;select-control-2&quot;</span>&gt;</span><br><span class="line">             &lt;div className=<span class="string">&quot;select-text&quot;</span>&gt;3D&lt;/div&gt;</span><br><span class="line">           &lt;/div&gt;</span><br><span class="line">         &lt;/div&gt;</span><br><span class="line">     &lt;/div&gt;</span><br><span class="line">     .........</span><br><span class="line">     &lt;/div&gt;</span><br><span class="line">   );</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>  完成页面移植，效果如下图：</p>
<p><img src="https://i.loli.net/2019/08/07/fboKDguXcMOYFxE.jpg" alt="" /></p>
<p>  当然，这其中还需要做一些元素位置，部分js代码的微调。</p>
<h3 id="js代码"><a class="markdownIt-Anchor" href="#js代码"></a> JS代码</h3>
<p>  如果页面有JS代码需要实现，只需写在componentDidMount中即可，以D3拓扑图为例。</p>
<p>  代码节选如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">var</span> width = <span class="built_in">document</span>.getElementById(<span class="string">&quot;knowledge_graph&quot;</span>).offsetWidth;</span><br><span class="line">   <span class="keyword">var</span> height = <span class="built_in">document</span>.getElementById(<span class="string">&quot;knowledge_graph&quot;</span>).offsetHeight;</span><br><span class="line">   <span class="keyword">var</span> img_w = <span class="number">32</span>;</span><br><span class="line">   <span class="keyword">var</span> img_h = <span class="number">32</span>;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">var</span> svg = d3.select(<span class="string">&quot;#knowledge_graph&quot;</span>).append(<span class="string">&quot;svg&quot;</span>)</span><br><span class="line">     .attr(<span class="string">&quot;width&quot;</span>,width)</span><br><span class="line">     .attr(<span class="string">&quot;height&quot;</span>,height)</span><br><span class="line">     .attr(<span class="string">&quot;vertical-align&quot;</span>,<span class="string">&quot;center&quot;</span>);</span><br><span class="line"></span><br><span class="line">   d3.json(<span class="string">&quot;http://47.92.162.213:8080/static/data/topology.json&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">error,root</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">if</span>( error )&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="built_in">console</span>.log(error);</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="built_in">console</span>.log(root);</span><br><span class="line"></span><br><span class="line">     <span class="keyword">var</span> force = d3.layout.force()</span><br><span class="line">       .nodes(root.nodes)</span><br><span class="line">       .links(root.edges)</span><br><span class="line">       .size([width,height])</span><br><span class="line">       .linkDistance(<span class="number">90</span>)</span><br><span class="line">       .charge(-<span class="number">500</span>)</span><br><span class="line">       .start();</span><br><span class="line"></span><br><span class="line">     ...........</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>  其运行结果如下图，图标资源没有修改路径，所以没有加载，但功能均正常。</p>
<p><img src="https://i.loli.net/2019/08/07/PchmW98Q4RYGxrb.jpg" alt="" /></p>
<p>  此页面在Dashboard/helloworld下可以看见源码。</p>
<h2 id="最后-数据调用"><a class="markdownIt-Anchor" href="#最后-数据调用"></a> 最后-数据调用</h2>
<p>  如果你需要用该框架获取数据，在用自己的JS逻辑来实现页面。</p>
<p>  在数据获取阶段，需要参考第一部分的原生开发方式，在model，api，和页面中完成数据获取阶段，随后数据就被保存在了props中。</p>
<p>  接下来如果想实现自己的逻辑，我在这里以echarts为例，部分代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="comment">//获取你的数据</span></span><br><span class="line">  ........</span><br><span class="line">  <span class="comment">//开始实现echarts</span></span><br><span class="line">  <span class="comment">// echarts原来该怎么写就怎么写</span></span><br><span class="line">  <span class="keyword">var</span> myChart = echarts.init(<span class="built_in">document</span>.getElementById(<span class="string">&#x27;main&#x27;</span>));</span><br><span class="line">  myChart.setOption(&#123;</span><br><span class="line">      title: &#123; <span class="attr">text</span>: <span class="string">&#x27;某地区蒸发量和降水量&#x27;</span> &#125;,</span><br><span class="line">      tooltip : &#123;</span><br><span class="line">        trigger: <span class="string">&#x27;axis&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    legend: &#123;</span><br><span class="line">        data:[<span class="string">&#x27;蒸发量&#x27;</span>,<span class="string">&#x27;降水量&#x27;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    toolbox: &#123;</span><br><span class="line">        show : <span class="literal">true</span>,</span><br><span class="line">        feature : &#123;</span><br><span class="line">            dataView : &#123;<span class="attr">show</span>: <span class="literal">true</span>, <span class="attr">readOnly</span>: <span class="literal">false</span>&#125;,</span><br><span class="line">            magicType : &#123;<span class="attr">show</span>: <span class="literal">true</span>, <span class="attr">type</span>: [<span class="string">&#x27;line&#x27;</span>, <span class="string">&#x27;bar&#x27;</span>]&#125;,</span><br><span class="line">            restore : &#123;<span class="attr">show</span>: <span class="literal">true</span>&#125;,</span><br><span class="line">            saveAsImage : &#123;</span><br><span class="line">              show: <span class="literal">true</span>,</span><br><span class="line">              type: <span class="string">&#x27;jpg&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">      xAxis : [</span><br><span class="line">        &#123;</span><br><span class="line">            type : <span class="string">&#x27;category&#x27;</span>,</span><br><span class="line">            data : <span class="built_in">this</span>.props.data.xdata    <span class="comment">//在这里使用你的数据即可</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    yAxis : [</span><br><span class="line">        &#123;</span><br><span class="line">            type : <span class="string">&#x27;value&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">      series : [</span><br><span class="line">        &#123;</span><br><span class="line">            name:<span class="string">&#x27;蒸发量&#x27;</span>,</span><br><span class="line">            type:<span class="string">&#x27;bar&#x27;</span>,</span><br><span class="line">            data: <span class="built_in">this</span>.props.data.ydata.ydata1,</span><br><span class="line">            markPoint : &#123;</span><br><span class="line">                data : [</span><br><span class="line">                    &#123;<span class="attr">type</span> : <span class="string">&#x27;max&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;最大值&#x27;</span>&#125;,</span><br><span class="line">                    &#123;<span class="attr">type</span> : <span class="string">&#x27;min&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;最小值&#x27;</span>&#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">.........................</span><br></pre></td></tr></table></figure></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Lufer</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://coder.lufer.cc/2019/04/22/AntDesignPro快速上手/">https://coder.lufer.cc/2019/04/22/AntDesignPro快速上手/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://coder.lufer.cc">Lufer</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/React/">React</a><a class="post-meta__tags" href="/tags/%E5%89%8D%E7%AB%AF/">前端</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2019/05/07/NextCloud%E7%A7%81%E6%9C%89%E4%BA%91%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8D%97/"><i class="fa fa-chevron-left">  </i><span>NextCloud私有云搭建指南</span></a></div><div class="next-post pull-right"><a href="/2019/02/16/%E8%80%83%E7%A0%94%E6%88%90%E7%BB%A9%E8%87%AA%E5%8A%A8%E6%9F%A5%E8%AF%A2%E8%84%9A%E6%9C%AC/"><span>考研成绩自动查询脚本</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="vcomment"></div><script src="https://cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = 'true' == 'true';
var verify = 'false' == 'true';
var record_ip = '' == 'true';
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  recordIP:record_ip,
  appId:'VqMxq8YhQKdt87hjlDYA4UDq-MdYXbMMI',
  appKey:'jMbPNFw1782lMDtEz6mIwhx4',
  placeholder:'早8点-晚11点会自动发送邮件提醒',
  avatar:'mm',
  guest_info:guest_info,
  pageSize:'10',
  lang: 'zh-cn'
})</script></div></div><footer class="footer-bg" style="background-image: url(http://pic.lufer.cc/images/2021/03/05/eI1dSA.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2016 - 2021 By Lufer</div><div class="framework-info"><span>驱动 - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">hitokoto</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.0"></script><script src="/js/fancybox.js?version=1.9.0"></script><script src="/js/sidebar.js?version=1.9.0"></script><script src="/js/copy.js?version=1.9.0"></script><script src="/js/fireworks.js?version=1.9.0"></script><script src="/js/transition.js?version=1.9.0"></script><script src="/js/scroll.js?version=1.9.0"></script><script src="/js/head.js?version=1.9.0"></script><script src="/js/search/algolia.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css"><script src="/js/katex.js"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="algolia-search"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>